(57) Clase 13 2024 08 20 - YouTube
https://www.youtube.com/watch?v=GVPMUj85oZU

Transcript:
(00:00) [Música] Hola este estamos teniendo problemas a la hora de proyectar aquí pero aún así vamos a continuar con la clase espérenme un segundo va al al
(01:59) al al hola Ya estoy aquí otz Este voy emp a grabar [Música] [Música]
(03:16) [Música] al ha Hola hola me escuchan en línea fallas técnicas Bueno ahora
(04:32) con práctica bueno básicamente significa al a este Hola soy yo davido este me
(05:55) dijeron que se veía muy feo entonces Kenia nos va a prestar su micrófono Sí muchas gracias K Este voy a ignorar tus mensajes Bueno este Ahora sí se escucha ya no vale se escucha mejor va Muchas gracias este bueno ahora sí por cuarta vez deo es básic el ataque a un canal de comunicación con la maestra ya vieron de que una comunicación siempre va entre dos entidades Ay me Estoy compartiendo vale una entidad a que normalmente decimos Alice y b de Bob no Okay entonces el hombre del medio básicamente es una persona intrusa
(07:00) a este canal Sigo sin compartir ahí ya no gracias por decir que así sí va gracias Bueno entonces lo que van a hacer en esta práctica va a ser atacar una un canal de comunicación básicamente hablando en redes de computadoras Pues un cliente servidor básicamente No acá está el cliente es una una personita inocente con su laptop y acá tenemos el
(08:08) servidor vale eh vamos a usar herramientas que ya se usan para hacking igual esto es muy útil a la hora de que de querer revisar tráfico de red y todo eso Pero bueno Eh sí les digo desde ahorita que usen el conocimiento con responsabilidad vale O sea no porque sepan hacerlo lo vayan vayan a abusar del Bueno entonces eh Bueno un poco de redes de computadoras porque justamente eh Necesitamos saber cómo funcionan las computadoras es que cada dispositivo tenemos dos direcciones una dirección IP que es como 48 16 bytes que normalmente las
(08:59) direcciones son como tipo este 168 punto 100 punto 3 no y una dirección Mac las direcciones Mac son direcciones físicas a nivel capa 2 en paquete Bueno sí en redes vale que son e letras así hexadecimales a 88 B 3 42 1 0 Vale entonces justamente una forma de hacer esto de atacar a una persona es usando su dirección Mac eh se fue la la pantalla Okay Ya regreso Okay es atacando esta dirección Mac que básicamente es suplantar la identidad de la persona y el servidor Bueno pues no nos interesa
(10:02) ahorita mucho vamos a poner local Host vale Bueno vamos a hacer la primera forma que no es como muy buena pero se puede hacer vale vamos a necesitar de que conocer un poco de comandos útiles para para interfaces de redes y el primero es If si le pongo guion me va a mostrar Ah bueno que sudo sí todas estas operaciones son con su superusuario y config me va a mostrar las interfaces de red que tengo ahorita disponibles aquí podemos ver que tengo una dirección de IP la submáscara de red que básicamente nos dice cuos dispositivos de red puede
(11:01) haber bueno cuántas direcciones IP y aquí tenemos el Mac Okay De hecho voy a ocupar este eh Para poder eh hackear un dispositivo Bueno okay antes de empezar a hacer un ataque lo primero que uno debería saber es cómo está la red vale necesitamos conectarnos a esa red si no estoy conectado a la red no puedo este interceptar nada de información por lo que necesito conocer la red vale hay una herramienta que se llam nmap De hecho si han visto películas de hacking y así se usa mucho esta herramienta de que para hackear Es una herramienta que nos ayuda
(12:00) a explorar redes vale Ahorita vamos a explorar la red de la facultad igual es una red muy grande entonces probablemente no podamos explorarla toda pero vamos a explorarla Okay acá arriba tengo la dirección IP de la red básicamente me está diciendo que eh puedo explorar esta red la que es 10.
(12:27) 14 y eh Bueno aquí le pongo la opción sn que solamente haga un pin a todos los dispositivos que estén conectados a esa red vale el pin es un mensaje de eco Entonces si responde el eco voy a obtener la dirección IP y Mac de cada dispositivo y Bueno aquí la red es la 10 pun 14 Okay pero la submáscara es 255 Entonces es esta subred Okay la subred es ocho bueno justamente el netmask me está diciendo la subred que en este caso es la red con 255 aquí que básicamente ponemos en ocho diciendo que todos los demás espacios de aquí son para direcciones IP básicamente Vale
(13:20) entonces ocupo escanear esta red le doy enter y va a empezar el escaneo de la red vale va a tardar un un rato en escanear todo HM y bueno en lo que escaneé algo vamos a seguir acá Okay entonces eh Bueno antes de que existieran los switches un switch Es uno que está por aquí en medio y básicamente reenvía paquetes a un dispositivo que también está en la red no Por ejemplo si aquí está c entonces va a reenviar los paquetes directamente a c entre a y b vale eh antes habían unos dispositivos que no eran switches eran hops que era como un
(14:26) dispositivo que reenv todos los paquetes a todos los puertos básicamente eh si yo podía Acceder al hob podía acceder a cualquier información ya que el hop siempre reenv toda la información a todos lados Bueno lo que queremos es esa ese comportamiento que el switch redirija los paquetes a mi a mi dispositivo en especial vale básicamente vamos a hacer aquí como un corte del usuario víctima a mí y yo al switch Ese es la idea vale meternos entre el canal de comunicación vamos a ver cómo va el escaneo aquí como pueden ver eh
(15:22) eh nos está mostrando todas las los dispositivos que hay en la red su dirección Mac y la dirección IP estos Cisco meraki eh suenan como a a routers entonces Eh bueno lo que nos importa es eh buscar clientes Buscar víctimas no ahorita estamos como como es una red muy grande Pues hay muchos dispositivos que no no importan mucho y bueno vamos a parar está acá porque nunca va okay Bueno lo que sigue es eh encontrar la dirección I p de una víctima Vale entonces ocupo un voluntario para que sea la víctima Quién quiere ser la
(16:26) víctima tú okay Cómo te llamas creo que así no vale un voluntario va a ser nuestra víctima vale jun va a ser la víctima en este caso puedes dirección y tu dirección ethernet Ah bueno Sí sí vente vente tenemos w la otra dirección
(18:26) V este no está bien Sí está muy bien gracias bueno ya tenemos nuestra primera víctima la víctima no sabe que vamos a espiarla entonces eh Okay como les dije la primera forma de de atacar en este caso a yun es suplantando su su Mac vale eh justamente Vamos a ponernos o sea yo desde la terminal que estoy aquí voy a ponerme la misma su misma dirección má vale Ahorita mi Mac es diferente es esta de
(19:38) aquí s se sigue viendo Sí ajá sí se veado Ah ya esp Sí se puede sí porque está espérenme un segundo voy a meterme en otro dispositivo al Perdón necesitamos
(21:40) Sí este a ver otra otra víctima ti Uf es este nada más la mac es el e otro Comando tengo con Ah s es nada más las letras a partir de DC 41 bu do puntos 41 punt a9 68 1 Vale entonces este primer ataque es como muy sencillo No necesitamos más herramientas nada más Necesitamos este Apagar por un momento nuestra interfaz
(22:46) de red voy a apagar Por un segundo mi interfaz de red Necesito el nombre de la interfaz Okay la interfaz de red básicamente es el dispositivo el Hardware en este caso es el W lp0 lp2 s0 vale ese y lo voy a apagar vale va a dejar de presentarse la pantalla entonces ahorita después de ejecutar este Comando porque Justo voy a apagar mi interfaz de red voy a necesitar ahorita cambiarle la dirección Mac a a otra con wh w la misma interfaz de red y aquí voy a anotar la nueva dirección Mac que sería DC puntos 41
(23:54) a9 68 puntos un y una vez que ya tenga esta configurada esta Mac ahora s voy a levantar con If config bueno la interfaz Ok Vale entonces voy a ejecutar primero el primer Comando con sudo porque justamente necesito con superusuario entonces y necesito una password tu contraseña deudo please va entonces se va a ir la señal y ahorita voy a configurar la otra con
(25:04) el otro Comando que puse Aquí If igual sudo If config W bueno la interfaz que es lwp 2 s0 eh w hw la nueva interfaz la voy a copiar de cont control shift c shift v [Música] un segundo sí
(26:17) s 31 a 9 rayos ya lo voy a levantar otra vez [Música] as
(27:44) Bueno ya Ya le cambié la interfaz de red Vale y ya este si otra vez pongo config aquí puedo ver que tengo la otra dirección Mac vale que es la que me dio Antonio una víctima de aquí y bueno en teoría puedo empezar a ver sus paquetes todos los que les manden a a esta dirección Mac yo los puedo ver vale nada más que este esta forma de atacar está un poco mal porque al final de cuentas el switch se va a hacer bolas que son dos iciones diferentes pero es la misma y sí les va a reenviar de que algunos paquetes a esta dirección Mac Pero va a
(28:35) haber mucho tráfico de Red porque se va a empezar a circular los paquetes y todo eso Pero bueno por eso les traigo la otra alternativa que es usando las herramientas este de bettercap okay Bueno entonces [Música] es que si lo traí que mi compo está Fall a ver voy a ver si puedo conectarme desde acá y ya okay espérenme un segundo al
(30:27) e ah al ahora sí
(31:44) ya este ya voy a presentar desde el dispositivo de otra de otro compañero [Música] para que vayan igual ustedes instalando la mejor alternativa para Esto va va entonces okay Voy a primero les voy a presentar esta puedo meter presentar esta herramienta que se llama documentation lo que sea
(32:50) y es una herramienta usar paquetes ahorita vamos a verlo incluso pueden inyectar en los paquetes de la víctima código suyo para que puedan pues manipular los links pueden manipular lo que la víctima está viendo No justamente aquí nos Explica lo del ataque in miro Ok y bueno este nada más es para que vayan viendo Lo importante es que ver cap se utiliza se interpreta con Ruby entonces este justamente necesitamos como tener eh algo de ru un intérprete entonces justamente aquí venimos y eh lo podemos instalar con las gemas de
(33:50) Ruby bueno con el gestor de paquetes vale primero necesitamos instalar Ruby que sería esta línea de aquí control y bueno lo pegamos acá vale est es para que pueda leerlo bien Ruby va a descargar unas cosas y vamos instalando Esto va esto es de Ruby vale todavía no instalamos ver para instalar ver necesitamos usar el gestor de paquetes este de aquí de gem gem instal ver vamos a instalarlo Ah me va a pedir permisos de usuario entonces este Vamos a ponerle un sud antes y me puedes poner Ah bueno no no me pidió vamos a instalar desde
(35:04) y ya nada más para comprobar necesitamos el update Bueno no es nada del otro mundo bueno Esto va a tomar un ratito en instalarse dependiendo de su computadora y ya bueno justamente es la herramienta bu en la documentación nos Explica cómo usarla Bueno yo ya les voy a dar más rápido la explicación a nada má voy a ver este la la que se instaló todo vale detectar eh Y versión Okay necesitamos hacerlo como r siempre que usen ehc necesitamos
(36:10) permisos de root entonces ahí está la herramienta e la última es la 1.6.2 Pero bueno vamos a usar better cap para atacar a un objetivo entonces este Necesito otra víctima Bueno Este es que tienes que reiniciar para que se interfaz de red se ponga otra vez al corriente Perdón era una víctima Okay este otra víctima necesito nada más que necesito que navegue por internet y ya sí no bueno eh
(37:16) Okay Eh sí gracias Nada más necesito tu dirección IP Okay la que sacas con en lo que llega la víctima bueno tenemos muchas opciones
(38:28) de estas hace lo suyo pero nada más vamos a usar el sniffer que básicamente es vamos a husmear paquetes que que a la víctima que ataquemos y necesitamos especificar la interfaz la interfaz justamente con If config tenemos la interfaz de red eh No esa es la la global pero instala este net Tools va [Música] inst Bueno si no tienen config pueden instalarlo con net ya no tarda mucho este así net entonces
(39:38) ahí Esta es la interfaz de red eh justamente la interfaz de redes con la que estoy ahorita conectado a internet vale Y bueno cada quien tiene una dirección IP diferente y así vale Entonces en este caso se llama la interfaz wp0 20 f3 es este el in Ah me lo puedes dictar no 10 punto6 ya nada más necesito eso gracias entonces Ah okay voy voy a usar ver Necesito especificar su interfaz la
(40:45) interfaz de red que voy a usar de hecho es la que está conectada a internet justamente porque por ahí puede llegar la la señal bueno pueden llegarme los paquetes este caso es wp0 s20 f3 está un poco larga uso la opción sniffer que básicamente me va a dar los paquetes que pasen a la víctima por mí vale Y necesito una opción más esp podemos ver aquí rápido en la documentación Ah cto Target Target en este caso va a ser la víctima que ya me dio su IP 46.
(41:45) 21 vale Y ya Ese es como lo más básico Vamos a darle enter Ah No escribí bien interface espérenme Ajá listo entonces Bueno ahí va Eh ya me dio la dirección Mac es decir que la víctima ya la Cacho Ya ya estoy entre la víctima y y digamos el internet Entonces víctima puedes acceder a cualquier página de que Eh sí nueva de que no sé Facebook o ya existe a una Okay no sale aquí pero cómo entonces en
(43:12) teoría si es que no si no se puede bueno justo tengo el presentimiento de que aquí bueno en esta red de la UNAM están protegidos contra este ataque porque justamente la víctima lo que le a donde apareció debería aparecerme aquí aquí abajito a ver s no no lo contemplé si están protegidas las redes pero en su redes su casa lo pueden hacer bien todo pero justo Bueno lo intentamos este qué les puedo decir bueno eh Okay vamos a dejar esto aquí porque sí sí debía aparecer de hecho eh debería salir el link a donde visitó
(44:13) la también me aparece o sea sí O sea a grandes rasgos les voy a explicar el pizarrón en tienes Este pero necesito dibujitos este para que entiendan lo que está pasando por tal vez no puedo ver su por están protegidos pero cómo me voy a conectar con ese algui bueno a ver en el chat el chat si necesitan estar en la misma r puede funcionar a ver sí sí sí quién se Quién se anima a probarlo desde su casa es que lo que
(45:20) estamos haciendo ahorita es atascar al router de peticiones de Y eso significa que está explotando el router pero justamente Supongo que aquí los tienen protegido ese esa explosión de paquetes falsos pero Okay hagan lo mismo de que instalen verc o bueno si ya lo tienen instalado eh Nada más escojan una víctima y nos comparten quién quién se Quién se apunta Para que veamos todos No nadie bueno no creo que no hay nadie bueno
(46:54) eh inténtenlo en su casa entonces o sea les voy a subir un un manual básicamente donde se explica cada cosa No de hecho deberíamos verlo con wir Shack conocen wires wir No Okay es una analizador de tráfico de que todos los paquetes Los voy a ver eh a nivel microscópico eh okay Lo Sí ahorita Les explico Qué es lo que está pasando justamente a nivel a nivel técnico HM vamos intentar
(48:45) Ah bueno eh lo que está pasando en realidad es un ataque a la rp al router básicamente Y supongo que aquí como son egresados de aquí saben cómo defenderse entonces acá tenemos el router de que por aquí entra todo el tráfico de red no que y acá tenemos un cliente tenemos otro cliente S3 y así Vale entonces este es el el atacante son víctimas a b c y d lo que está pasando Es
(49:49) que bueno hay estamos usando el protocolo arp request para poder hacer este ataque lo que lo que lo que en grandes términos quiere decir es que estoy como engañando al router en cierta manera diciéndole que yo el atacante Quiero comunicarme con el dispositivo B Vale entonces este justamente como el atacante está en una Red nueva el el router como que tiene que investigar quién es ese dispositivo no entonces llega el paquete por acá y a todos les pregunta Quién es B Quién es B Okay justamente el el router si lo vemos
(50:50) por un segundo está haciendo el mismo comportamiento que un que básicamente es reenviar un paquete a tod todas las computadoras vale Y yo al lo saturo de estos paquetes o sea le mando otro paquete c que igual hace lo mismo luego le envío un paquete d que hace lo mismo y lo estoy saturando todo el tiempo vale igual se puede acabamos de ver que se puede quitar eso que no lo saturos Pero va a mandar todos los paquetes a todos los dispositivos y pues ese el dispositivo si coincide lo va a regresar vale va a decir Ah sí soy yo yo
(51:34) soy el paquete ve que que enviaste al principio soy yo entonces yo te respondo que soy yo vale Y yo voy a hacer como si no hubiera pasado nada y le voy a enviar otro paquete B Entonces el paquete B siempre me va a estar enviando a mí eh este mensaje bueno el diciendo Yo soy el paquete va a estar respondiendo todo el tiempo y justamente como estamos llenando el router de esas cosas eh justamente si este B Se va a otro lado puedo eh regresar ese paquete el que visitó justamente es lo que estamos haciendo estamos inundando al al
(52:18) router de estos paquetes falsos y al momento de de que me regrese la información también estamos trayendo su información de que a dónde viajó y todo eso No justamente no le aparece al usuario el que estamos accediendo a esa información porque es parte del protocolo rp Pero bueno eh Esa es la idea lo que está pasando eh estamos saturando de peticiones al router Y pues el router como que pierde su como que sí pierde su forma de operar por un rato y y aprovechamos como esa vulnerabilidad Sí nada más que aquí no se no pudimos hacerlo porque seguramente
(53:06) está protegida la red de aquí Bueno sí no no se puede ser pero si lo intentan en su casa o en una red pública que también se puede Bueno si no está protegida de este tipo de ataques pueden verlo vale eh les voy a mandar un PDF con la práctica o sea lo que tienen que entregar básicamente van a replicar esto en su casa de que van una víctima van a seleccionar este las páginas que quieran visitar y desde aquí desde les va aparecer las páginas pero no sale aquí porque la reda podemos gracias puede ver nuestros paquetes o sea en buen
(54:02) sentido Nadie puede sí estamos seguros en la red de aquí no puedo snifar tan tan fácilmente vale Bueno entonces [Música] eh a sí todas las barreras bueno es que como que se divide la red en muchos dispositivos podemos saturar uno pero no podemos saturar todos o sea tenemos que atacar todos al mismo tiempo para que pueda hacerse el ataque bien o sea el proxi de hecho ya no les dije pero hay una cosa que es el el protocolo http que básicamente recibo el texto plano no y luego
(55:07) justamente con este tipo de ataques yo puedo ver esos http como como si fuera el usuario de que si visito una página puedo tener su página tal cual pero justo se eso se hizo el https entonces Necesito usar un Proxy falso para que la víctima piensa que está en un sitio legítimo es https pero en realidad Está como pasando a través de mi computadora el https yo lo estoy bajando de https a http y ya o sea sí es es son técnicas más avanzadas de no ahorita nada más estamos haciendo lo básico con ver sí bueno la idea de esto no es que jaqueen
(56:00) la NASA nada más que puedan este verl A dónde visita otra persona qué pgina Y ya es como la primer forma de atacar uno Primero tienes como que husmear cosas tienes que o sea porque las pueden viajar contraseñas en esos paquetes pueden viajar información sensible Pero si tú nada más estás viendo lo que le llega a la otra persona ya puedes empezar a hacer como preparar tu ataque más poderoso se este es como un ataque pasivo no estoy avisándole a la víctima que la estoy atacando nada más estoy viendo lo que hace y ya sí
(57:00) Ah Sí de hecho es este sí créanme que PDF va a hacer va a reponer esta clase porque no no no fue como pensaba la verdad tuvimos muchos problemas técnicos y gracias a Antonio y y como yén y a Lexi por ayudarme porque si necesito victim este en el PDF está de que todos los pasos que necesitan seguir y la explicación un poco más a detalle vale no se tienen que preocupar no salió bien ahorita pero si necesitan entregar un PDF por equipo y documentarlo m y yo no si mejor que cada quien lo haga que aprendan todos o sea porque si es un
(58:06) equipo nada más uno lo hace y los demás dicen í salió pero si todos lo hacen ya estoy feliz de que pero no necesitas pedirle nada porque conap puedes investigar qué dirección tiene hay un 21 un 10.21 por ahí quién será no sé hay que ver qué hace y ya V los sitios que visita ves la información que pasa y si se le va el dedo de que visita una página http O sea que no es Http es que no tiene seguridad básicamente tú puedes ver página Ah ahí se meten otras técnicas de que ingeniería social y todo eso este el arp request es un protocolo para
(59:03) comunicarme a un dispositivo que no conozco eh en una red si yo quiero mandarle a mi impresora que no conozco un documento para imprimir Necesito hacer una rp request y el router se va a encargar como de comunicarme con él pero lo que va a hacer es comunicar a todos y justo Ahí estamos aprovechando el todos de hecho Bueno si leen la documentación un poco no es tan larga pueden atacar a toda la red O sea no Solo lo que hace una persona sino lo que hacen todas las personas en la red y todo el tráfico pasa a través de
(59:45) ustedes le la documentación y vas a ver con una opción ya puedes ver toda la red de que todo pasa por nada más que su router de casa va a volverse loco y puede bajar la velocidad y así Vale entonces este úsenlos Qué onda Diego Sí el reporte es individual para que todos sepan qu Sí o sea subanlo o sea en este Bueno hay como tres partes introducción desarrollo conclusiones y referencias en el desarrollo cada quien pone su parte vale eh soy tal y hice esto no y los pasos y la la otra persona hace soy tal y los pasos
(1:00:48) y y un PDF por todos y en qué pues sí qué Qué piensan de eso cómo lo pueden prevenir o cómo pueden empezar a sospechar que alguien está viendo su tráfico y así O sea tienen que investigar un poco sobre eso Ah cómo ah no nada más es como Qué te pareció la práctica y Qué puedes hacer al respecto nada más pero ahí se explica tienen más dudas la grabación este gracias
(1:01:57) Gracias Este voy a salirme de aquí Bueno y pues ya eso es todo nos vemos eh Hasta la otra semana le subo el PDF de que Ay Dios Se los voy a subir hasta en la noche pero pero neta háganlo lo van a agradecer después Bueno ahora no sé cómo pagar esto nos vemos bye an
